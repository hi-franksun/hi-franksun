

## 多进程和多线程概念

对于操作系统来说，一个任务就是一个进程（process），每个进程中可以分成多个线程（thread），比如打开一个work 进程，里边的打字、检查、保存等都是这个进程中的线程；

多任务处理的三个方案：
1. 多进程模式
2. 多线程模式
3. 多进程+多线程模式

线程是最小的执行单元，而进程至少又一个线程，如何调度进程和线程，完全由操作系统决定，涉及到同步、数据共享等，比较复杂；

### 进程 vs 线程

实现多任务，一般的设计模式是 Master-Worker， Master 负责分配任务，Worker 负责执行任务，两种方式中 Master 就是主线程和主进程；

#### 优缺点

多进程模式：
- 优点：稳定性高，一个进程崩溃不至于全部崩溃，一般 Master 只负责分发任务，一般不糊崩溃
- 缺点：创建线程代价大，unix 环境下 `folk` 调用还可以，在 Windows 上创建线程开销巨大，系统对同时运行的线程也有限制，不可能同时运行很多的线程，运行过多，系统调度都很困难，就崩了 

多线程模式：
- 优点：整体速度会快一点
- 缺点：稳定性差，一个线程崩溃，这个进程就会崩溃，所以线程共享一个进程的内存，非常容易崩溃

#### 线程切换
无论多 process 还是 thread ，只要数量足够多，效率一定是不行的，切换是需要时间的，过多的切换 process/thread 都没有意义；

#### 计算密集 vs IO密集型
计算密集型：需要大量的计算，大量消耗 CPU 资源，全靠 CPU 的运算能力，这种基本上多任务模式没必要，最多也就支持对应 CPU 核心数的多任务，4核 4个多任务，这类一般都会用 C 语言来写

IO 密集型：90% 以上时间都用在 IO 上，在 CPU 上时间较少，比如 WEB 开发，这个时候最合适的语言就是效率高的语言（代码少），提升开发效率，这个时候 C 语言就是最差了，Java、python 这些语言是最好的选择；



## 多进程
python 提供了一个跨平台模块，也就是 multiprocessing 模块中一个 Process 类来代表一个进程对象；




## 多线程
python 多线程的类库是 threading


## 经典问题：生产者和消费者
程序运行时会产生大量数据，用户会对数据进行一系列操作





## 异步 IO

在 python 中也就是`协程`